<?php
$this->layout('layout.phtml', ['title' => $url['name']]);
?>

<div class="container-lg">
    <h1 class="display-4 my-4">Сайт: <?= htmlspecialchars($url['name']) ?></h1>
    
    <table class="table table-bordered table-hover" data-test="url">
        <tbody>
            <tr>
                <th>ID</th>
                <td><?= htmlspecialchars($url['id']) ?></td>
            </tr>
            <tr>
                <th>Имя</th>
                <td>
                    <a href="<?= htmlspecialchars($url['name']) ?>" target="_blank">
                        <?= htmlspecialchars($url['name']) ?>
                    </a>
                </td>
            </tr>
            <tr>
                <th>Дата создания</th>
                <td><?= htmlspecialchars($url['created_at']) ?></td>
            </tr>
        </tbody>
    </table>

    <h2 class="my-4">Проверки</h2>
    
    <form method="post" action="/urls/<?= $url['id'] ?>/checks">
        <button type="submit" class="btn btn-primary mb-3">Запустить проверку</button>
    </form>
    
    <table class="table table-bordered table-hover" data-test="checks">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Код ответа</th>
                <th>h1</th>
                <th>title</th>
                <th>description</th>
                <th>Дата создания</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($checks as $check): ?>
            <tr>
                <td><?= htmlspecialchars($check['id']) ?></td>
                <td><?= htmlspecialchars($check['status_code']) ?></td>
                <td><?= htmlspecialchars($check['h1'] ?? '') ?></td>
                <td><?= htmlspecialchars($check['title'] ?? '') ?></td>
                <td><?= htmlspecialchars($check['description'] ?? '') ?></td>
                <td><?= htmlspecialchars($check['created_at']) ?></td>
            </tr>
            <?php endforeach ?>
        </tbody>
    </table>
</div>